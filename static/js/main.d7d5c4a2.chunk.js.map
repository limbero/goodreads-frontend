{"version":3,"sources":["App.tsx","index.tsx"],"names":["Status","Page","styled","div","ellipsis","keyframes","Loading","Error","BookDiv","bookWidth","StyledBook","book","href","url","target","rel","src","cover_src","alt","read_date","className","App","useState","status","setStatus","books","setBooks","currentlyReadingBooks","booksReadThisYear","favoriteBooks","useEffect","fetch","then","res","json","Loaded","catch","length","map","idx","Date","getFullYear","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oJA+GKA,E,4DArGCC,EAAOC,IAAOC,IAAV,yFASJC,EAAWC,YAAH,6FAQRC,EAAUJ,IAAOC,IAAV,mUASIC,GAMXG,EAAQL,IAAOC,IAAV,yFAQLK,EAAUN,IAAOC,IAAV,wvBAFK,IAoCLM,MAGOA,OAUdC,EAAa,SAAC,GAAD,IAAEC,EAAF,EAAEA,KAAF,OACjB,cAACH,EAAD,UACE,oBAAGI,KAAMD,EAAKE,IAAKC,OAAO,SAASC,IAAI,sBAAvC,UACE,qBAAKC,IAAKL,EAAKM,UAAWC,IAAI,KAE5BP,EAAKQ,UAEH,oBAAGC,UAAU,YAAb,sBAAkC,uBAAMT,EAAKQ,aAC3C,Y,SAMPnB,O,qBAAAA,I,mBAAAA,I,kBAAAA,M,KAiEUqB,MA3Df,WAAgB,IAAD,EACeC,mBAAStB,EAAOM,SAD/B,mBACNiB,EADM,KACEC,EADF,OAEmDF,mBAAS,CAAC,GAAG,GAAG,KAFnE,mBAENG,EAFM,KAECC,EAFD,mBAG+ED,EAH/E,GAGNE,EAHM,KAGiBC,EAHjB,KAGoCC,EAHpC,KAab,OATAC,qBAAU,WACRC,MAAM,8EACHC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAC,GACJP,EAASO,GACTT,EAAUxB,EAAOmC,WAChBC,OAAM,kBAAMZ,EAAUxB,EAAOO,YACjC,IAECgB,IAAWvB,EAAOM,QAElB,cAACL,EAAD,UACE,cAACK,EAAD,wBAKFiB,IAAWvB,EAAOO,MAElB,cAACN,EAAD,UACE,cAACM,EAAD,8CAMJ,eAACN,EAAD,WACE,qDAAwB0B,EAAsBU,OAA9C,OACA,8BAEIV,EAAsBW,KAAI,SAAC3B,EAAY4B,GAAb,OACtB,cAAC,EAAD,CAAY5B,KAAMA,GAAW4B,QAIrC,kDAAoB,IAAIC,MAAOC,cAA/B,KAAgDb,EAAkBS,OAAlE,OACA,8BAEIT,EAAkBU,KAAI,SAAC3B,EAAY4B,GAAb,OACpB,cAAC,EAAD,CAAY5B,KAAMA,GAAW4B,QAInC,sDAAyBV,EAAcQ,OAAvC,OACA,8BAEIR,EAAcS,KAAI,SAAC3B,EAAY4B,GAAb,OAChB,cAAC,EAAD,CAAY5B,KAAMA,GAAW4B,YCpKzCG,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.d7d5c4a2.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styled, { keyframes } from 'styled-components';\n\ntype Book = {\n  url: string;\n  title: string;\n  read_date: string;\n  cover_src: string;\n}\n\nconst Page = styled.div`\n  text-align: center;\n\n  h2 {\n    margin: 45px 0 0;\n  }\n`;\n\n\nconst ellipsis = keyframes`\n  from {\n    width: 0px;\n  }\n  to {\n    width: 1.25em;\n  }\n`;\nconst Loading = styled.div`\n  font-size: 30px;\n  height: 100vh;\n  line-height: 100vh;\n\n  &:after {\n    overflow: hidden;\n    display: inline-block;\n    vertical-align: bottom; \n    animation: ${ellipsis} steps(4,end) 900ms infinite;\n    content: \"â€¦\"; /* ascii code for the ellipsis character */\n    width: 0px;\n  }\n`;\n\nconst Error = styled.div`\n  font-size: 30px;\n  height: 100vh;\n  line-height: 100vh;\n`;\n\nconst bookWidth = 150;\n\nconst BookDiv = styled.div`\n  display: inline-block;\n  position: relative;\n\n  width: ${bookWidth}px;\n  overflow: hidden;\n  border-radius: 3px;\n  text-align: center;\n\n  margin: 30px 20px;\n\n  a {\n    color: #000;\n    text-decoration: none;\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n\n  img {\n    width: 100%;\n    margin-bottom: -4px;\n  }\n\n  p.read-date {\n    opacity: 0;\n    position: absolute;\n    box-sizing: border-box;\n\n    background: #FFF;\n    padding: 5px;\n    border-radius: 2px;\n    box-shadow: 2px 2px 5px rgba(0,0,0, 0.5);\n\n    width: ${bookWidth*0.75}px;\n    top: -20px;\n    left: 50%;\n    margin-left: -${bookWidth*0.75/2}px;\n\n    transition: opacity .15s, top .15s;\n  }\n  &:hover p.read-date {\n    opacity: 1;\n    top: 10px;\n  }\n`;\n\nconst StyledBook = ({book}: {book: Book}) => (\n  <BookDiv>\n    <a href={book.url} target=\"_blank\" rel=\"noopener noreferrer\">\n      <img src={book.cover_src} alt=\"\" />\n      {\n        book.read_date\n        ? (\n          <p className=\"read-date\">Finished:<br/>{book.read_date}</p>\n        ) : null\n      }\n    </a>\n  </BookDiv>\n);\n\nenum Status {\n  Loading,\n  Loaded,\n  Error,\n}\n\nfunction App() {\n  const [status, setStatus] = useState(Status.Loading);\n  const [books, setBooks]: [[Book[], Book[], Book[]], Function] = useState([[],[],[]]);\n  const [currentlyReadingBooks, booksReadThisYear, favoriteBooks]: [Book[], Book[], Book[]] = books;\n  useEffect(() => {\n    fetch('https://europe-west3-rugged-shell-330515.cloudfunctions.net/goodreads_node')\n      .then(res => res.json())\n      .then(res => {\n        setBooks(res);\n        setStatus(Status.Loaded);\n      }).catch(() => setStatus(Status.Error));\n  }, []);\n\n  if (status === Status.Loading) {\n    return (\n      <Page>\n        <Loading>Loading</Loading>\n      </Page>\n    );\n  }\n\n  if (status === Status.Error) {\n    return (\n      <Page>\n        <Error>Ruh roh, something went wong!</Error>\n      </Page>\n    );\n  }\n  \n  return (\n    <Page>\n      <h2>Currently reading ({currentlyReadingBooks.length})</h2>\n      <div>\n        {\n          currentlyReadingBooks.map((book: Book, idx: number) => (\n              <StyledBook book={book} key={idx} />\n          ))\n        }\n      </div>\n      <h2>Read so far in {new Date().getFullYear()} ({booksReadThisYear.length})</h2>\n      <div>\n        {\n          booksReadThisYear.map((book: Book, idx: number) => (\n            <StyledBook book={book} key={idx} />\n          ))\n        }\n      </div>\n      <h2>All time favorites ({favoriteBooks.length})</h2>\n      <div>\n        {\n          favoriteBooks.map((book: Book, idx: number) => (\n            <StyledBook book={book} key={idx} />\n          ))\n        }\n      </div>\n    </Page>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}